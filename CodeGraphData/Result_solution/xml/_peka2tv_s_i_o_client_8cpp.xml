<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="_peka2tv_s_i_o_client_8cpp" kind="file">
    <compoundname>Peka2tvSIOClient.cpp</compoundname>
    <includes refid="_peka2tv_s_i_o_client_8h" local="yes">Peka2tvSIOClient.h</includes>
    <includes local="no">iostream</includes>
    <includes local="no">functional</includes>
    <includes local="no">nlohmann/json.hpp</includes>
    <includes local="no">fstream</includes>
    <includes local="no">boost/date_time/posix_time/posix_time.hpp</includes>
    <incdepgraph>
      <node id="2149">
        <label>F:/projects/pepecontroller/pepecontroller/src/peka2tv/Peka2tvSIOClient.cpp</label>
        <link refid="Peka2tvSIOClient.cpp"/>
        <childnode refid="2150" relation="include">
        </childnode>
        <childnode refid="2158" relation="include">
        </childnode>
        <childnode refid="2159" relation="include">
        </childnode>
        <childnode refid="2160" relation="include">
        </childnode>
        <childnode refid="2161" relation="include">
        </childnode>
        <childnode refid="2162" relation="include">
        </childnode>
      </node>
      <node id="2159">
        <label>functional</label>
      </node>
      <node id="2152">
        <label>boost/signals2.hpp</label>
      </node>
      <node id="2150">
        <label>Peka2tvSIOClient.h</label>
        <link refid="_peka2tv_s_i_o_client_8h"/>
        <childnode refid="2151" relation="include">
        </childnode>
        <childnode refid="2152" relation="include">
        </childnode>
        <childnode refid="2153" relation="include">
        </childnode>
        <childnode refid="2154" relation="include">
        </childnode>
        <childnode refid="2155" relation="include">
        </childnode>
        <childnode refid="2156" relation="include">
        </childnode>
        <childnode refid="2157" relation="include">
        </childnode>
      </node>
      <node id="2153">
        <label>string</label>
      </node>
      <node id="2161">
        <label>fstream</label>
      </node>
      <node id="2162">
        <label>boost/date_time/posix_time/posix_time.hpp</label>
      </node>
      <node id="2157">
        <label>optional</label>
      </node>
      <node id="2154">
        <label>vector</label>
      </node>
      <node id="2151">
        <label>sio_client.h</label>
      </node>
      <node id="2158">
        <label>iostream</label>
      </node>
      <node id="2155">
        <label>unordered_map</label>
      </node>
      <node id="2160">
        <label>nlohmann/json.hpp</label>
      </node>
      <node id="2156">
        <label>memory</label>
      </node>
    </incdepgraph>
    <innernamespace refid="namespacepeka2tv">peka2tv</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_peka2tv_s_i_o_client_8h" kindref="compound">Peka2tvSIOClient.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;iostream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;functional&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;nlohmann/json.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;fstream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;boost/date_time/posix_time/posix_time.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">peka2tv</highlight></codeline>
<codeline lineno="9"><highlight class="normal">{</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11" refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a84ccefee79b91249e70ce9f7f9f671ce" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a84ccefee79b91249e70ce9f7f9f671ce" kindref="member">Peka2tvSIOClient::Connect</ref>(std::string<sp/>host)</highlight></codeline>
<codeline lineno="12"><highlight class="normal">{</highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;host<sp/>=<sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1ad421f57d210a073f2b216f7563c33ab2" kindref="member">host</ref>;</highlight></codeline>
<codeline lineno="14"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1aaa56e626d6283751dae7e0aac9c03786" kindref="member">client</ref>.connect(host);</highlight></codeline>
<codeline lineno="15"><highlight class="normal">}</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a6870fcd9a66a37825c85ec6ca82d70f0" refkind="member"><highlight class="normal"><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1af5a6a357823784158c02516fc4a5d28e" kindref="member">Peka2tvSIOClient::EventHubPtr</ref><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a6870fcd9a66a37825c85ec6ca82d70f0" kindref="member">Peka2tvSIOClient::Join</ref>(std::string<sp/>channel)</highlight></codeline>
<codeline lineno="18"><highlight class="normal">{</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>args<sp/>=<sp/>sio::object_message::create();</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/>std::dynamic_pointer_cast&lt;sio::object_message&gt;(args)-&gt;insert(</highlight><highlight class="stringliteral">&quot;channel&quot;</highlight><highlight class="normal">,<sp/>channel);</highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1aaa56e626d6283751dae7e0aac9c03786" kindref="member">client</ref>.socket()-&gt;emit(</highlight><highlight class="stringliteral">&quot;/chat/join&quot;</highlight><highlight class="normal">,<sp/>args);</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1ab6cfe6a0d5f4bd7401787d12c76fed06" kindref="member">isChatListen</ref>)</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1aaa56e626d6283751dae7e0aac9c03786" kindref="member">client</ref>.socket()-&gt;on(</highlight><highlight class="stringliteral">&quot;/chat/message&quot;</highlight><highlight class="normal">,<sp/>std::bind(&amp;<ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a8da54490886ea7b4f16cf46a78793933" kindref="member">Peka2tvSIOClient::OnMessage</ref>,<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>std::placeholders::_1));</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1ab6cfe6a0d5f4bd7401787d12c76fed06" kindref="member">isChatListen</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>eh<sp/>=<sp/>std::make_shared&lt;EventHub&gt;();</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(channel<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;all&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a315e41d2b85390716e7ddcaf622a6100" kindref="member">allChatListeners</ref>.push_back(eh);</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a188dfe271dcba2d78035e54baa19309d" kindref="member">chatListeners</ref>.insert({<sp/>channel,<sp/>eh<sp/>});</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>eh;</highlight></codeline>
<codeline lineno="38"><highlight class="normal">}</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40" refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a5bcc8cd807247f87bedb195131da87d9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a5bcc8cd807247f87bedb195131da87d9" kindref="member">Peka2tvSIOClient::Leave</ref>(std::string<sp/>channel)</highlight></codeline>
<codeline lineno="41"><highlight class="normal">{</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>args<sp/>=<sp/>sio::object_message::create();</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>std::dynamic_pointer_cast&lt;sio::object_message&gt;(args)-&gt;insert(</highlight><highlight class="stringliteral">&quot;channel&quot;</highlight><highlight class="normal">,<sp/>channel);</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1aaa56e626d6283751dae7e0aac9c03786" kindref="member">client</ref>.socket()-&gt;emit(</highlight><highlight class="stringliteral">&quot;/chat/leave&quot;</highlight><highlight class="normal">,<sp/>args);</highlight></codeline>
<codeline lineno="47"><highlight class="normal">}</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49" refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a4df0ed097cd1ad306e55ecc50bf3083b" refkind="member"><highlight class="normal"><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a4df0ed097cd1ad306e55ecc50bf3083b" kindref="member">Peka2tvSIOClient::~Peka2tvSIOClient</ref>()</highlight></codeline>
<codeline lineno="50"><highlight class="normal">{</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1aaa56e626d6283751dae7e0aac9c03786" kindref="member">client</ref>.close();</highlight></codeline>
<codeline lineno="52"><highlight class="normal">}</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54" refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a8da54490886ea7b4f16cf46a78793933" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a8da54490886ea7b4f16cf46a78793933" kindref="member">Peka2tvSIOClient::OnMessage</ref>(sio::event<sp/>&amp;<sp/>e)</highlight></codeline>
<codeline lineno="55"><highlight class="normal">{</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>msg<sp/>=<sp/>e.get_message()-&gt;get_map();</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a217fdb387e15adbc368a80ff09c5bd76" kindref="member">RemoveDanglingListeners</ref>();</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>std::optional&lt;ChatMessage&gt;<sp/>m;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a315e41d2b85390716e7ddcaf622a6100" kindref="member">allChatListeners</ref>.empty())</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m<sp/>=<sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a196299278f9ffb5556b5e8ba71e1e2b4" kindref="member">ParseChatMessage</ref>(msg);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>x<sp/>:<sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a315e41d2b85390716e7ddcaf622a6100" kindref="member">allChatListeners</ref>)</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*x.lock())(*m);</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string<sp/>channel<sp/>=<sp/>msg[</highlight><highlight class="stringliteral">&quot;channel&quot;</highlight><highlight class="normal">]-&gt;get_string();</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>found<sp/>=<sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a188dfe271dcba2d78035e54baa19309d" kindref="member">chatListeners</ref>.find(channel);</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(found<sp/>==<sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a188dfe271dcba2d78035e54baa19309d" kindref="member">chatListeners</ref>.end())</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a5bcc8cd807247f87bedb195131da87d9" kindref="member">Leave</ref>(channel);</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>listener<sp/>=<sp/>found-&gt;second.lock();</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!listener)</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a188dfe271dcba2d78035e54baa19309d" kindref="member">chatListeners</ref>.erase(found);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a5bcc8cd807247f87bedb195131da87d9" kindref="member">Leave</ref>(channel);</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!m)</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m<sp/>=<sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a196299278f9ffb5556b5e8ba71e1e2b4" kindref="member">ParseChatMessage</ref>(msg);</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>(*listener)(*m);</highlight></codeline>
<codeline lineno="89"><highlight class="normal">}</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91" refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a217fdb387e15adbc368a80ff09c5bd76" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a217fdb387e15adbc368a80ff09c5bd76" kindref="member">Peka2tvSIOClient::RemoveDanglingListeners</ref>()</highlight></codeline>
<codeline lineno="92"><highlight class="normal">{</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>rit<sp/>=<sp/>std::remove_if(<ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a315e41d2b85390716e7ddcaf622a6100" kindref="member">allChatListeners</ref>.begin(),<sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a315e41d2b85390716e7ddcaf622a6100" kindref="member">allChatListeners</ref>.end(),<sp/>[](</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::weak_ptr&lt;EventHub&gt;&amp;<sp/>x)</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>!x.lock();</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>});</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a315e41d2b85390716e7ddcaf622a6100" kindref="member">allChatListeners</ref>.erase(rit,<sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a315e41d2b85390716e7ddcaf622a6100" kindref="member">allChatListeners</ref>.end());</highlight></codeline>
<codeline lineno="99"><highlight class="normal">}</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="namespacepeka2tv_1a15abb4cac0e2dd20bfcc3d225fa1cc59" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacepeka2tv_1a15abb4cac0e2dd20bfcc3d225fa1cc59" kindref="member">LogChatCommands</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message" kindref="compound">Peka2tvSIOClient::ChatMessage</ref>&amp;<sp/>m,<sp/>std::ofstream&amp;<sp/>f)</highlight></codeline>
<codeline lineno="102"><highlight class="normal">{<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/>boost::posix_time::ptime<sp/>date_time<sp/>=<sp/>boost::posix_time::microsec_clock::local_time();</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!f.is_open())</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f.open(</highlight><highlight class="stringliteral">&quot;log.txt&quot;</highlight><highlight class="normal">,<sp/>std::ios::app);</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/>f<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;[&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>date_time<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;]<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1a9c6b72091bd9f18ffbbc886929d093b7" kindref="member">timestamp</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1a2b4f1d185a77a442d74f20f3627beb37" kindref="member">from</ref>.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1_1_user_1a128fbc9914de261f5c8b62255caf82e1" kindref="member">name</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;#&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1a2b4f1d185a77a442d74f20f3627beb37" kindref="member">from</ref>.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1_1_user_1a6e87aac23c9262fab162b7b888aa81df" kindref="member">id</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1ac554bf9609f74e8f3f13bf55ed555e1e" kindref="member">text</ref><sp/>&lt;&lt;<sp/>std::endl;</highlight></codeline>
<codeline lineno="107"><highlight class="normal">}</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109" refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a196299278f9ffb5556b5e8ba71e1e2b4" refkind="member"><highlight class="normal"><ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message" kindref="compound">Peka2tvSIOClient::ChatMessage</ref><sp/><ref refid="classpeka2tv_1_1_peka2tv_s_i_o_client_1a196299278f9ffb5556b5e8ba71e1e2b4" kindref="member">Peka2tvSIOClient::ParseChatMessage</ref>(std::map&lt;std::string,<sp/>sio::message::ptr&gt;&amp;<sp/>obj)</highlight></codeline>
<codeline lineno="110"><highlight class="normal">{</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message" kindref="compound">ChatMessage</ref><sp/>m;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>from<sp/>=<sp/>obj[</highlight><highlight class="stringliteral">&quot;from&quot;</highlight><highlight class="normal">]-&gt;get_map();</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1a2b4f1d185a77a442d74f20f3627beb37" kindref="member">from</ref>.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1_1_user_1a6e87aac23c9262fab162b7b888aa81df" kindref="member">id</ref><sp/>=<sp/>from[</highlight><highlight class="stringliteral">&quot;id&quot;</highlight><highlight class="normal">]-&gt;get_int();</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1a2b4f1d185a77a442d74f20f3627beb37" kindref="member">from</ref>.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1_1_user_1a128fbc9914de261f5c8b62255caf82e1" kindref="member">name</ref><sp/>=<sp/>from[</highlight><highlight class="stringliteral">&quot;name&quot;</highlight><highlight class="normal">]-&gt;get_string();</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1a2b4f1d185a77a442d74f20f3627beb37" kindref="member">from</ref>.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1_1_user_1a614cc2cad9f9c62f5d356cae59c954fd" kindref="member">color</ref><sp/>=<sp/>from[</highlight><highlight class="stringliteral">&quot;color&quot;</highlight><highlight class="normal">]-&gt;get_int();</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>to<sp/>=<sp/>obj[</highlight><highlight class="stringliteral">&quot;to&quot;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(to-&gt;get_flag()<sp/>==<sp/>sio::message::flag::flag_object)</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>o<sp/>=<sp/>to-&gt;get_map();</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1abf25260a270fb9c91b8ccbe1804855de" kindref="member">to</ref><sp/>=<sp/>{<sp/>o[</highlight><highlight class="stringliteral">&quot;color&quot;</highlight><highlight class="normal">]-&gt;get_int(),<sp/>o[</highlight><highlight class="stringliteral">&quot;id&quot;</highlight><highlight class="normal">]-&gt;get_int(),<sp/>o[</highlight><highlight class="stringliteral">&quot;name&quot;</highlight><highlight class="normal">]-&gt;get_string()<sp/>};</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1ac554bf9609f74e8f3f13bf55ed555e1e" kindref="member">text</ref><sp/>=<sp/>obj[</highlight><highlight class="stringliteral">&quot;text&quot;</highlight><highlight class="normal">]-&gt;get_string();</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1a9c6b72091bd9f18ffbbc886929d093b7" kindref="member">timestamp</ref><sp/>=<sp/>obj[</highlight><highlight class="stringliteral">&quot;time&quot;</highlight><highlight class="normal">]-&gt;get_int();</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1a40b0048fe227fc422a7d6cd2481add0c" kindref="member">anonymous</ref><sp/>=<sp/>obj[</highlight><highlight class="stringliteral">&quot;anonymous&quot;</highlight><highlight class="normal">]-&gt;get_bool();</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/>m.<ref refid="structpeka2tv_1_1_peka2tv_s_i_o_client_1_1_chat_message_1a918fe393bf2879d6bff9b14cceb2a125" kindref="member">channel</ref><sp/>=<sp/>obj[</highlight><highlight class="stringliteral">&quot;channel&quot;</highlight><highlight class="normal">]-&gt;get_string();</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>m;</highlight></codeline>
<codeline lineno="130"><highlight class="normal">}</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="F:/projects/pepecontroller/pepecontroller/src/peka2tv/Peka2tvSIOClient.cpp"/>
  </compounddef>
</doxygen>
